<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Regression Textbook Supplement - 4&nbsp; Multiple Linear Regression Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapter5.html" rel="next">
<link href="./chapter3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Multiple Linear Regression Models</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Regression Textbook Supplement</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Review</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Simple Linear Regression Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter4.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Multiple Linear Regression Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter5.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Goodness of Fit</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#required-packages" id="toc-required-packages" class="nav-link active" data-scroll-target="#required-packages"><span class="toc-section-number">4.1</span>  Required packages</a></li>
  <li><a href="#page-66-correlations" id="toc-page-66-correlations" class="nav-link" data-scroll-target="#page-66-correlations"><span class="toc-section-number">4.2</span>  Page 66 Correlations</a>
  <ul>
  <li><a href="#activate-packages" id="toc-activate-packages" class="nav-link" data-scroll-target="#activate-packages"><span class="toc-section-number">4.2.1</span>  Activate packages</a></li>
  <li><a href="#obtain-data-and-save-it-to-your-computer" id="toc-obtain-data-and-save-it-to-your-computer" class="nav-link" data-scroll-target="#obtain-data-and-save-it-to-your-computer"><span class="toc-section-number">4.2.2</span>  Obtain data and save it to your computer</a>
  <ul>
  <li><a href="#load-data-from-your-computer" id="toc-load-data-from-your-computer" class="nav-link" data-scroll-target="#load-data-from-your-computer"><span class="toc-section-number">4.2.2.1</span>  Load data from your computer</a></li>
  </ul></li>
  <li><a href="#inspect-data" id="toc-inspect-data" class="nav-link" data-scroll-target="#inspect-data"><span class="toc-section-number">4.2.3</span>  Inspect data</a></li>
  <li><a href="#select-focal-variables" id="toc-select-focal-variables" class="nav-link" data-scroll-target="#select-focal-variables"><span class="toc-section-number">4.2.4</span>  Select focal variables</a></li>
  <li><a href="#correlation-options" id="toc-correlation-options" class="nav-link" data-scroll-target="#correlation-options"><span class="toc-section-number">4.2.5</span>  Correlation options</a>
  <ul>
  <li><a href="#psych-package" id="toc-psych-package" class="nav-link" data-scroll-target="#psych-package"><span class="toc-section-number">4.2.5.1</span>  psych package</a></li>
  <li><a href="#apatables-package" id="toc-apatables-package" class="nav-link" data-scroll-target="#apatables-package"><span class="toc-section-number">4.2.5.2</span>  apaTables package</a></li>
  <li><a href="#corrr-package" id="toc-corrr-package" class="nav-link" data-scroll-target="#corrr-package"><span class="toc-section-number">4.2.5.3</span>  corrr package</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#page-67-one-predictor" id="toc-page-67-one-predictor" class="nav-link" data-scroll-target="#page-67-one-predictor"><span class="toc-section-number">4.3</span>  Page 67 One Predictor</a></li>
  <li><a href="#page-68-two-predictors" id="toc-page-68-two-predictors" class="nav-link" data-scroll-target="#page-68-two-predictors"><span class="toc-section-number">4.4</span>  Page 68 Two Predictors</a>
  <ul>
  <li><a href="#two-predictors-predicted-scores" id="toc-two-predictors-predicted-scores" class="nav-link" data-scroll-target="#two-predictors-predicted-scores"><span class="toc-section-number">4.4.1</span>  Two Predictors: Predicted Scores</a></li>
  </ul></li>
  <li><a href="#page-71-3d-plot" id="toc-page-71-3d-plot" class="nav-link" data-scroll-target="#page-71-3d-plot"><span class="toc-section-number">4.5</span>  Page 71 3D plot</a></li>
  <li><a href="#page-72-understanding-b-weights" id="toc-page-72-understanding-b-weights" class="nav-link" data-scroll-target="#page-72-understanding-b-weights"><span class="toc-section-number">4.6</span>  Page 72 Understanding b-weights</a></li>
  <li><a href="#page-76-b--vs-beta-weights" id="toc-page-76-b--vs-beta-weights" class="nav-link" data-scroll-target="#page-76-b--vs-beta-weights"><span class="toc-section-number">4.7</span>  Page 76 b- vs beta-weights</a></li>
  <li><a href="#page-77-relative-importance" id="toc-page-77-relative-importance" class="nav-link" data-scroll-target="#page-77-relative-importance"><span class="toc-section-number">4.8</span>  Page 77 Relative importance</a></li>
  <li><a href="#page-79-predicted-means" id="toc-page-79-predicted-means" class="nav-link" data-scroll-target="#page-79-predicted-means"><span class="toc-section-number">4.9</span>  Page 79 Predicted Means</a></li>
  <li><a href="#page-86-chapter-exercises" id="toc-page-86-chapter-exercises" class="nav-link" data-scroll-target="#page-86-chapter-exercises"><span class="toc-section-number">4.10</span>  Page 86 Chapter Exercises</a>
  <ul>
  <li><a href="#activate-packages-1" id="toc-activate-packages-1" class="nav-link" data-scroll-target="#activate-packages-1"><span class="toc-section-number">4.10.1</span>  Activate packages</a></li>
  <li><a href="#obtain-data-and-save-it-to-your-computer-1" id="toc-obtain-data-and-save-it-to-your-computer-1" class="nav-link" data-scroll-target="#obtain-data-and-save-it-to-your-computer-1"><span class="toc-section-number">4.10.2</span>  Obtain data and save it to your computer</a></li>
  <li><a href="#load-data-from-your-computer-1" id="toc-load-data-from-your-computer-1" class="nav-link" data-scroll-target="#load-data-from-your-computer-1"><span class="toc-section-number">4.10.3</span>  Load data from your computer</a></li>
  <li><a href="#inspect-data-1" id="toc-inspect-data-1" class="nav-link" data-scroll-target="#inspect-data-1"><span class="toc-section-number">4.10.4</span>  Inspect data</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Multiple Linear Regression Models</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="required-packages" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="required-packages"><span class="header-section-number">4.1</span> Required packages</h2>
<p>The following CRAN packages must be installed:</p>
<table class="table">
<thead>
<tr class="header">
<th>Required CRAN Packages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tidyverse</td>
</tr>
<tr class="even">
<td>usethis</td>
</tr>
<tr class="odd">
<td>janitor</td>
</tr>
<tr class="even">
<td>skimr</td>
</tr>
<tr class="odd">
<td>apaTables</td>
</tr>
<tr class="even">
<td>broom</td>
</tr>
<tr class="odd">
<td>corrr</td>
</tr>
<tr class="even">
<td>tidymodels</td>
</tr>
<tr class="odd">
<td>remotes</td>
</tr>
<tr class="even">
<td>relaimpo</td>
</tr>
<tr class="odd">
<td>psych</td>
</tr>
</tbody>
</table>
<p>REMINDER:</p>
<p>Never use the command library(psych). Instead use psych:: before each command.</p>
<p>Never use the command library(relaimpo). Instead use relaimpo:: before each command.</p>
<p>The following GitHub packages must be installed:</p>
<table class="table">
<thead>
<tr class="header">
<th>Required GitHub Packages</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dstanley4/fastInteraction</td>
</tr>
</tbody>
</table>
<p>After the remotes package is installed, it can be used to install a package from GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"dstanley4/fastInteraction"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="page-66-correlations" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="page-66-correlations"><span class="header-section-number">4.2</span> Page 66 Correlations</h2>
<section id="activate-packages" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="activate-packages"><span class="header-section-number">4.2.1</span> Activate packages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis) <span class="co"># use_github_file()</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># read_csv() </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># clean_names() </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="obtain-data-and-save-it-to-your-computer" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="obtain-data-and-save-it-to-your-computer"><span class="header-section-number">4.2.2</span> Obtain data and save it to your computer</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">use_github_file</span>(<span class="at">repo_spec =</span> <span class="st">"https://github.com/johnhoffmannVA/LinearRegression/blob/main/StateData2018.csv"</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">save_as =</span> <span class="st">"statedata2018.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="load-data-from-your-computer" class="level4" data-number="4.2.2.1">
<h4 data-number="4.2.2.1" class="anchored" data-anchor-id="load-data-from-your-computer"><span class="header-section-number">4.2.2.1</span> Load data from your computer</h4>
<p>Clean names is essential here. It makes sure all column names are lower case. They are not all lower case in the original data file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>statedata2018 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"statedata2018.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="inspect-data" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="inspect-data"><span class="header-section-number">4.2.3</span> Inspect data</h3>
<p>There are so many column names in this data set that we do the glimpse a bit differently. That is, we sort the order of the columns alphabetically prior to doing the glimpse(). It affects only the display of the column names - not the structure of the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>statedata2018 <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">sort</span>(<span class="fu">names</span>(statedata2018))) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 50
Columns: 77
$ aa_voted_percent           &lt;dbl&gt; 49.6, NA, 50.9, 41.6, 49.9, 31.0, 48.3, 55.…
$ alc_disorder_past_year     &lt;dbl&gt; 4.51, 6.57, 5.49, 5.38, 5.51, 6.30, 6.10, 6…
$ assault_rate               &lt;dbl&gt; 283.4, 440.2, 252.1, 346.0, 236.6, 192.8, 1…
$ assoc_degree               &lt;dbl&gt; 8.2, 8.5, 8.4, 6.7, 7.7, 8.6, 7.5, 7.9, 9.7…
$ bach_degree                &lt;dbl&gt; 15.4, 19.0, 18.1, 14.2, 20.6, 24.9, 21.9, 1…
$ binge_alc_past_month       &lt;dbl&gt; 21.40, 24.20, 23.10, 19.49, 23.52, 26.97, 2…
$ burglary_rate              &lt;dbl&gt; 819.0, 427.6, 647.1, 835.7, 522.3, 438.2, 3…
$ census_division            &lt;chr&gt; "EastSouthCentral", "Pacific", "Mountain", …
$ census_region              &lt;chr&gt; "South", "West", "West", "South", "West", "…
$ comm_supervision_rate      &lt;dbl&gt; 1591.14, 1522.95, 1503.95, 2222.08, 1088.59…
$ community_supervision      &lt;dbl&gt; 60700, 8400, 84800, 51500, 333300, 90900, 4…
$ conservative               &lt;dbl&gt; 26.00835, 19.27924, 20.40239, 25.04501, 17.…
$ cost_living                &lt;dbl&gt; 89.3, 129.9, 97.0, 86.9, 151.7, 105.6, 127.…
$ death_row                  &lt;dbl&gt; 177, 0, 120, 32, 727, 3, 0, 0, 348, 49, 0, …
$ death_row_rate             &lt;dbl&gt; 4.33, 0.00, 2.18, 1.33, 3.59, 0.09, 0.00, 0…
$ doctoral_degree            &lt;dbl&gt; 1.0, 1.2, 1.2, 0.9, 1.6, 1.6, 1.6, 1.8, 1.1…
$ dom_mig_rate               &lt;dbl&gt; 1.17, -14.58, 11.61, 0.82, -3.95, 7.60, -6.…
$ dom_migration              &lt;dbl&gt; 5718, -10752, 83240, 2475, -156068, 43293, …
$ fips_code                  &lt;dbl&gt; 1, 2, 4, 5, 6, 8, 9, 10, 12, 13, 15, 16, 17…
$ gross_state_product        &lt;dbl&gt; 211197, 51479, 326446, 122704, 2797601, 345…
$ guns                       &lt;dbl&gt; 161641, 15824, 179738, 79841, 344622, 92435…
$ guns_per_capita            &lt;dbl&gt; 33.15, 21.38, 25.61, 26.57, 8.71, 16.48, 22…
$ health_exp_per_capita      &lt;dbl&gt; 7281, 11064, 6452, 7408, 7549, 6804, 9859, …
$ illicit_disorder_past_year &lt;dbl&gt; 2.86, 3.69, 2.79, 2.80, 2.97, 3.43, 3.47, 3…
$ illicit_drugs_past_month   &lt;dbl&gt; 8.67, 16.81, 10.77, 10.51, 13.11, 17.83, 12…
$ infant_mortality_rate      &lt;dbl&gt; 9.03, 5.17, 5.32, 8.20, 4.22, 4.76, 4.78, 7…
$ intern_mig_rate            &lt;dbl&gt; 0.68, 3.26, 2.00, 0.75, 2.98, 1.44, 4.62, 1…
$ intern_migration           &lt;dbl&gt; 3344, 2401, 14335, 2260, 117797, 8207, 1649…
$ larceny_rate               &lt;dbl&gt; 2149.5, 2096.4, 2289.1, 2313.5, 1527.4, 185…
$ latinx_voted_percent       &lt;dbl&gt; 29.1, NA, 48.8, 20.8, 43.3, 43.9, 41.1, NA,…
$ life_expectancy            &lt;dbl&gt; 75.0, 77.8, 79.2, 75.5, 81.0, 80.0, 80.7, 7…
$ life_satis                 &lt;dbl&gt; 51.42162, 52.08266, 51.38469, 52.34836, 51.…
$ masters_degree             &lt;dbl&gt; 6.9, 7.6, 7.8, 5.9, 8.4, 10.9, 12.1, 8.9, 7…
$ med_hh_income              &lt;dbl&gt; 48486, 76715, 56213, 45726, 71228, 68811, 7…
$ median_age                 &lt;dbl&gt; 39.0, 33.5, 37.5, 38.0, 36.4, 36.7, 40.9, 4…
$ mental_illness_past_year   &lt;dbl&gt; 19.95, 20.32, 18.02, 20.73, 18.18, 19.86, 1…
$ motor_vehicle_theft_rate   &lt;dbl&gt; 209.1, 236.0, 261.3, 188.8, 391.3, 234.8, 1…
$ murder_ms_rate             &lt;dbl&gt; 5.7, 5.6, 4.7, 5.6, 4.4, 2.8, 2.4, 5.8, 5.8…
$ opioid_od_death_rate       &lt;dbl&gt; 9.0, 13.9, 13.5, 6.5, 5.3, 10.0, 27.7, 27.8…
$ pain_pill_past_year        &lt;dbl&gt; 4.53, 4.81, 4.27, 5.03, 4.30, 4.87, 4.21, 4…
$ per_age0_18                &lt;dbl&gt; 24, 27, 24, 25, 24, 24, 22, 22, 21, 26, 23,…
$ per_age19_25               &lt;dbl&gt; 9, 9, 9, 9, 9, 9, 8, 8, 8, 9, 7, 9, 9, 9, 9…
$ per_age26_34               &lt;dbl&gt; 12, 13, 12, 12, 14, 14, 11, 12, 12, 12, 12,…
$ per_age35_54               &lt;dbl&gt; 25, 26, 24, 25, 26, 26, 27, 25, 25, 27, 25,…
$ per_age55_64               &lt;dbl&gt; 14, 13, 12, 13, 12, 13, 15, 14, 14, 12, 13,…
$ per_age65plus              &lt;dbl&gt; 17, 12, 18, 17, 14, 14, 17, 19, 21, 14, 19,…
$ per_am_ind_alaskan         &lt;dbl&gt; 1.0, 16.0, 4.0, 1.0, 1.0, 1.0, 0.5, 0.5, 0.…
$ per_asian                  &lt;dbl&gt; 1, 6, 3, 2, 15, 3, 5, 4, 3, 4, 38, 2, 6, 2,…
$ per_black                  &lt;dbl&gt; 26.0, 3.0, 4.0, 15.0, 5.0, 4.0, 10.0, 21.0,…
$ per_cap_income             &lt;dbl&gt; 26846, 35874, 29265, 25635, 35021, 36415, 4…
$ per_child_poverty          &lt;dbl&gt; 24, 13, 20, 24, 17, 12, 14, 17, 19, 20, 12,…
$ per_latinx                 &lt;dbl&gt; 4, 7, 32, 8, 39, 22, 17, 9, 26, 10, 10, 13,…
$ per_pop_change2010_18      &lt;dbl&gt; 2.254, 3.828, 12.192, 3.354, 6.181, 13.247,…
$ per_poverty                &lt;dbl&gt; 16.89, 11.11, 14.86, 16.40, 13.30, 10.29, 9…
$ per_white                  &lt;dbl&gt; 66, 60, 54, 72, 37, 68, 66, 62, 53, 52, 21,…
$ percent_uninsured          &lt;dbl&gt; 12.0, 14.3, 12.7, 9.8, 8.3, 8.6, 6.2, 6.8, …
$ pop_change2010_18          &lt;dbl&gt; 107733, 27189, 779358, 97797, 2302522, 6662…
$ pop_density                &lt;dbl&gt; 95.4, 1.3, 58.3, 56.9, 246.1, 50.8, 742.6, …
$ pop18and_older             &lt;dbl&gt; 3814879, 551562, 5638481, 2317649, 30617582…
$ population                 &lt;dbl&gt; 4887871, 737438, 7171646, 3013825, 39557045…
$ prison_rate                &lt;dbl&gt; 1072.12, 797.73, 975.44, 1035.53, 662.04, 7…
$ prisoners                  &lt;dbl&gt; 40900, 4400, 55000, 24000, 202700, 32100, 1…
$ professional_degree        &lt;dbl&gt; 1.5, 1.8, 1.8, 1.3, 2.4, 2.3, 3.0, 1.9, 2.1…
$ prop_crime_rate            &lt;dbl&gt; 3177.6, 2760.0, 3197.5, 3338.0, 2441.1, 253…
$ rape_rate                  &lt;dbl&gt; 41.3, 104.7, 50.2, 59.4, 29.7, 56.7, 21.7, …
$ religious                  &lt;dbl&gt; 32.03850, 24.12306, 26.40519, 30.05092, 24.…
$ robbery_rate               &lt;dbl&gt; 96.9, 85.4, 92.8, 69.1, 125.5, 56.7, 87.8, …
$ state                      &lt;chr&gt; "Alabama", "Alaska", "Arizona", "Arkansas",…
$ state_taxes_per_capita     &lt;dbl&gt; 2262, 2226, 2272, 3266, 4424, 2599, 5341, 4…
$ suic_rate_age_adj          &lt;dbl&gt; 16.6, 27.0, 18.2, 20.8, 10.5, 20.3, 10.5, 1…
$ suicide_idea_past_year     &lt;dbl&gt; 3.89, 5.34, 4.02, 4.59, 4.04, 5.41, 4.05, 4…
$ suicide_rate               &lt;dbl&gt; 15.90, 28.07, 19.37, 21.72, 11.48, 21.59, 1…
$ tobacco_past_month         &lt;dbl&gt; 30.12, 26.68, 21.19, 30.69, 16.23, 20.15, 2…
$ total_voted_percent        &lt;dbl&gt; 69.0, 67.7, 68.6, 58.5, 61.5, 65.6, 68.0, 6…
$ unemploy_rate              &lt;dbl&gt; 4.1, 6.5, 4.7, 3.5, 4.1, 3.1, 4.2, 4.0, 3.5…
$ violent_crime_rate         &lt;dbl&gt; 427.4, 635.8, 399.9, 480.1, 396.1, 309.1, 2…
$ white_voted_percent        &lt;dbl&gt; 52.6, 60.3, 65.3, 44.0, 61.4, 62.6, 57.7, 5…</code></pre>
</div>
</div>
</section>
<section id="select-focal-variables" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="select-focal-variables"><span class="header-section-number">4.2.4</span> Select focal variables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>focal_data <span class="ot">&lt;-</span> statedata2018 <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(violent_crime_rate, per_child_poverty, med_hh_income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="correlation-options" class="level3" data-number="4.2.5">
<h3 data-number="4.2.5" class="anchored" data-anchor-id="correlation-options"><span class="header-section-number">4.2.5</span> Correlation options</h3>
<section id="psych-package" class="level4" data-number="4.2.5.1">
<h4 data-number="4.2.5.1" class="anchored" data-anchor-id="psych-package"><span class="header-section-number">4.2.5.1</span> psych package</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>focal_data <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  psych<span class="sc">::</span><span class="fu">corr.test</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:psych::corr.test(x = .)
Correlation matrix 
                   violent_crime_rate per_child_poverty med_hh_income
violent_crime_rate               1.00              0.49         -0.21
per_child_poverty                0.49              1.00         -0.76
med_hh_income                   -0.21             -0.76          1.00
Sample Size 
[1] 50
Probability values (Entries above the diagonal are adjusted for multiple tests.) 
                   violent_crime_rate per_child_poverty med_hh_income
violent_crime_rate               0.00                 0          0.15
per_child_poverty                0.00                 0          0.00
med_hh_income                    0.15                 0          0.00

 To see confidence intervals of the correlations, print with the short=FALSE option</code></pre>
</div>
</div>
</section>
<section id="apatables-package" class="level4" data-number="4.2.5.2">
<h4 data-number="4.2.5.2" class="anchored" data-anchor-id="apatables-package"><span class="header-section-number">4.2.5.2</span> apaTables package</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(apaTables)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>focal_data <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apa.cor.table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

Descriptive Statistics and Correlations
 

  Variable              M        SD      1           2           
  1. violent_crime_rate 346.81   128.82                          
                                                                 
                                                                 
                                                                 
  2. per_child_poverty  16.84    4.75    .49**                   
                                         [.25, .68]              
                                         p &lt; .001                
                                                                 
  3. med_hh_income      60252.12 9879.50 -.21        -.76**      
                                         [-.46, .07] [-.85, -.61]
                                         p = .147    p &lt; .001    
                                                                 

Note. M and SD are used to represent mean and standard deviation, respectively.
Values in square brackets indicate the 95% confidence interval.
 * indicates p &lt; .05. ** indicates p &lt; .01.
 </code></pre>
</div>
</div>
</section>
<section id="corrr-package" class="level4" data-number="4.2.5.3">
<h4 data-number="4.2.5.3" class="anchored" data-anchor-id="corrr-package"><span class="header-section-number">4.2.5.3</span> corrr package</h4>
<p>We use correlate() to get the correlations, shave() to remove upper diagonal, and fashion() to make it nice:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>focal_data <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlate</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">shave</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fashion</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                term violent_crime_rate per_child_poverty med_hh_income
1 violent_crime_rate                                                   
2  per_child_poverty                .49                                
3      med_hh_income               -.21              -.76              </code></pre>
</div>
</div>
<p>But more importantly the corrr package has network_plot() to visual relations among variables. Here we only plot relations where the magnitude of the correlation is greater than .20:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>focal_data <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlate</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">network_plot</span>(<span class="at">min_cor =</span> .<span class="dv">2</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"green"</span>), </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend =</span> <span class="st">"full"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="chapter4_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="page-67-one-predictor" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="page-67-one-predictor"><span class="header-section-number">4.3</span> Page 67 One Predictor</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>lm4_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate <span class="sc">~</span> per_child_poverty,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> focal_data)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm4_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term              estimate std.error statistic  p.value
  &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)          122.      59.6       2.05 0.0456  
2 per_child_poverty     13.3      3.41      3.91 0.000285</code></pre>
</div>
</div>
</section>
<section id="page-68-two-predictors" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="page-68-two-predictors"><span class="header-section-number">4.4</span> Page 68 Two Predictors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>lm4_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate <span class="sc">~</span> per_child_poverty <span class="sc">+</span> med_hh_income,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> focal_data)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm4_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term                estimate std.error statistic  p.value
  &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)       -311.      218.          -1.43 0.161   
2 per_child_poverty   21.2       5.04         4.20 0.000116
3 med_hh_income        0.00499   0.00242      2.06 0.0450  </code></pre>
</div>
</div>
<section id="two-predictors-predicted-scores" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="two-predictors-predicted-scores"><span class="header-section-number">4.4.1</span> Two Predictors: Predicted Scores</h3>
<p>Two help us interpret the data we will make a graph. But to do so we need to know the range for per_child_poverty. We find it ranges from 9 percent to 28 percent from the skim() output below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>focal_data <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(per_child_poverty) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 22%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">per_child_poverty</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">16.84</td>
<td style="text-align: right;">4.75</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">16.5</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">▅▇▇▅▂</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now we want to know the mean of med_hh_income below. We find it is 60252.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>focal_data <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(med_hh_income) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">med_hh_income</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">60252.12</td>
<td style="text-align: right;">9879.5</td>
<td style="text-align: right;">43567</td>
<td style="text-align: right;">53133.5</td>
<td style="text-align: right;">59162.5</td>
<td style="text-align: right;">67687.25</td>
<td style="text-align: right;">81868</td>
<td style="text-align: left;">▅▇▇▃▃</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now we want to HOLD med_hh_income constant at 60252 and then see how violent_crime_rate changes with per_child_poverty. We create a dataset where this is the case:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>predict4values <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">per_child_poverty =</span> <span class="fu">seq</span>(<span class="dv">9</span>, <span class="dv">28</span>), </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">med_hh_income =</span> <span class="dv">60252</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(predict4values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   per_child_poverty med_hh_income
1                  9         60252
2                 10         60252
3                 11         60252
4                 12         60252
5                 13         60252
6                 14         60252
7                 15         60252
8                 16         60252
9                 17         60252
10                18         60252
11                19         60252
12                20         60252
13                21         60252
14                22         60252
15                23         60252
16                24         60252
17                25         60252
18                26         60252
19                27         60252
20                28         60252</code></pre>
</div>
</div>
<p>We use our regression model to generate predicted scores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create predicted scores use the regression weights created in lm4_2</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>predicted_violent_crime_rate <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm4_2, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">newdata =</span> predict4values)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Put the predicted scores back into our data set of possible values</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>predict4values <span class="ot">&lt;-</span> predict4values <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">predicted_violent_crime_rate =</span> predicted_violent_crime_rate)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(predict4values)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   per_child_poverty med_hh_income predicted_violent_crime_rate
1                  9         60252                     180.7560
2                 10         60252                     201.9358
3                 11         60252                     223.1156
4                 12         60252                     244.2953
5                 13         60252                     265.4751
6                 14         60252                     286.6549
7                 15         60252                     307.8346
8                 16         60252                     329.0144
9                 17         60252                     350.1942
10                18         60252                     371.3739
11                19         60252                     392.5537
12                20         60252                     413.7335
13                21         60252                     434.9132
14                22         60252                     456.0930
15                23         60252                     477.2728
16                24         60252                     498.4525
17                25         60252                     519.6323
18                26         60252                     540.8121
19                27         60252                     561.9918
20                28         60252                     583.1716</code></pre>
</div>
</div>
<p>Now graph it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>prediction_graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> predict4values,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> per_child_poverty,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">y =</span> predicted_violent_crime_rate)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">28</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">700</span>)) <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="at">by =</span> <span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">100</span>, <span class="dv">700</span>, <span class="at">by =</span> <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Percent Child Poverty"</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Predicted Violent Crime Rate (yhat)"</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(prediction_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="chapter4_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="page-71-3d-plot" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="page-71-3d-plot"><span class="header-section-number">4.5</span> Page 71 3D plot</h2>
<p>When you have two predictors you don’t have a regression line - you have a regression surface. The code below creates a surface plot that you can interact with/rotate/etc. Note that even though we put med_hh_income in the moderator position in the function there is no moderation here. Be sure to click and drag to rotate the graph.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fastInteraction)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>surface_plot <span class="ot">&lt;-</span> <span class="fu">fast.plot</span>(lm4_2,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">criterion =</span> violent_crime_rate,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">predictor =</span> med_hh_income,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">moderator =</span> per_child_poverty)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>surface_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8069cbbfcb9984066c94" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-8069cbbfcb9984066c94">{"x":{"visdat":{"b4001cb8b7a7":["function () ","plotlyVisDat"]},"cur_data":"b4001cb8b7a7","attrs":{"b4001cb8b7a7":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":[[46.8802537383706,96.1865910511244,145.492928363878,194.799265676632,244.105602989386],[147.536789556431,196.843126869185,246.149464181939,295.455801494693,344.762138807447],[248.193325374492,297.499662687246,346.806,396.112337312754,445.418674625508],[348.849861192553,398.156198505307,447.462535818061,496.768873130815,546.075210443568],[449.506397010614,498.812734323368,548.119071636122,597.425408948875,646.731746261629]],"type":"surface","x":[40493.1,50372.6,60252.1,70131.6,80011.1],"y":[7.3,12.1,16.8,21.6,26.3],"opacity":0.9,"colors":["#d1d1d1","#555555"],"inherit":true},"b4001cb8b7a7.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[48486,76715,56213,45726,71228,68811,76106,65627,53267,55679,78084,53089,63575,54325,58580,57422,48948,47942,55425,81868,77378,54938,68411,43567,53560,52559,59116,57598,74057,79363,48059,65323,52413,63473,54533,51424,59393,59445,63296,51015,59499,50972,59570,68374,60076,71564,70116,44921,59209,62268],"y":[24,13,20,24,17,12,14,17,19,20,12,15,16,18,14,15,22,26,12,11,12,19,12,28,18,14,14,17,10,14,27,19,20,9,19,21,15,17,18,22,16,22,21,9,11,13,13,24,14,13],"z":[427.4,635.8,399.9,480.1,396.1,309.1,236.9,489.1,540.5,377.3,259.2,212.2,370,365.3,273.5,348.6,211.6,514.7,127.8,446.1,391.4,427.3,229.1,278.5,442.9,323.7,280.4,635.6,196.1,261.2,597.4,381.8,329.5,265.1,284.9,406,232.3,314.1,219.2,497.7,326.5,608.4,405.9,215.6,99.3,196.2,285.2,302,290.3,195.5],"type":"scatter3d","mode":"markers","color":"black","size":5,"name":"Data points","inherit":true},"b4001cb8b7a7.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[40493.1167010025,50372.6183505012,60252.12,70131.6216494988,80011.1232989976],"y":[12.0875140769299,12.0875140769299,12.0875140769299,12.0875140769299,12.0875140769299],"z":[147.536789556431,196.843126869185,246.149464181939,295.455801494693,344.762138807447],"type":"scatter3d","mode":"lines","line":{"color":"black","width":10,"dash":"dash"},"name":"-1 SD line","inherit":true},"b4001cb8b7a7.3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":[40493.1167010025,50372.6183505012,60252.12,70131.6216494988,80011.1232989976],"y":[21.5924859230701,21.5924859230701,21.5924859230701,21.5924859230701,21.5924859230701],"z":[348.849861192553,398.156198505307,447.462535818061,496.768873130815,546.075210443568],"type":"scatter3d","mode":"lines","line":{"color":"black","width":10,"dash":"dash"},"name":"+1 SD line","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"med_hh_income","range":[40493.1,80011.1],"ticktype":"array","tickvals":[40493.1,50372.6,60252.1,70131.6,80011.1]},"yaxis":{"title":"per_child_poverty","range":[7.3,26.3],"ticktype":"array","tickvals":[7.3,12.1,16.8,21.6,26.3]},"zaxis":{"title":"violent_crime_rate"},"aspectmode":"cube","aspectratio":{"x":1,"y":1,"z":0.95},"showlegend":true},"hovermode":"closest","showlegend":true,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(209,209,209,1)"],["0.0416666666666667","rgba(203,203,203,1)"],["0.0833333333333333","rgba(198,198,198,1)"],["0.125","rgba(192,192,192,1)"],["0.166666666666667","rgba(187,187,187,1)"],["0.208333333333333","rgba(182,182,182,1)"],["0.25","rgba(176,176,176,1)"],["0.291666666666667","rgba(171,171,171,1)"],["0.333333333333333","rgba(166,166,166,1)"],["0.375","rgba(160,160,160,1)"],["0.416666666666667","rgba(155,155,155,1)"],["0.458333333333333","rgba(150,150,150,1)"],["0.5","rgba(145,145,145,1)"],["0.541666666666667","rgba(139,139,139,1)"],["0.583333333333333","rgba(134,134,134,1)"],["0.625","rgba(129,129,129,1)"],["0.666666666666667","rgba(124,124,124,1)"],["0.708333333333333","rgba(119,119,119,1)"],["0.75","rgba(114,114,114,1)"],["0.791666666666667","rgba(109,109,109,1)"],["0.833333333333333","rgba(104,104,104,1)"],["0.875","rgba(99,99,99,1)"],["0.916666666666667","rgba(95,95,95,1)"],["0.958333333333333","rgba(90,90,90,1)"],["1","rgba(85,85,85,1)"]],"showscale":true,"z":[[46.8802537383706,96.1865910511244,145.492928363878,194.799265676632,244.105602989386],[147.536789556431,196.843126869185,246.149464181939,295.455801494693,344.762138807447],[248.193325374492,297.499662687246,346.806,396.112337312754,445.418674625508],[348.849861192553,398.156198505307,447.462535818061,496.768873130815,546.075210443568],[449.506397010614,498.812734323368,548.119071636122,597.425408948875,646.731746261629]],"type":"surface","x":[40493.1,50372.6,60252.1,70131.6,80011.1],"y":[7.3,12.1,16.8,21.6,26.3],"opacity":0.9,"frame":null},{"x":[48486,76715,56213,45726,71228,68811,76106,65627,53267,55679,78084,53089,63575,54325,58580,57422,48948,47942,55425,81868,77378,54938,68411,43567,53560,52559,59116,57598,74057,79363,48059,65323,52413,63473,54533,51424,59393,59445,63296,51015,59499,50972,59570,68374,60076,71564,70116,44921,59209,62268],"y":[24,13,20,24,17,12,14,17,19,20,12,15,16,18,14,15,22,26,12,11,12,19,12,28,18,14,14,17,10,14,27,19,20,9,19,21,15,17,18,22,16,22,21,9,11,13,13,24,14,13],"z":[427.4,635.8,399.9,480.1,396.1,309.1,236.9,489.1,540.5,377.3,259.2,212.2,370,365.3,273.5,348.6,211.6,514.7,127.8,446.1,391.4,427.3,229.1,278.5,442.9,323.7,280.4,635.6,196.1,261.2,597.4,381.8,329.5,265.1,284.9,406,232.3,314.1,219.2,497.7,326.5,608.4,405.9,215.6,99.3,196.2,285.2,302,290.3,195.5],"type":"scatter3d","mode":"markers","name":"Data points","marker":{"color":"rgba(145,145,145,1)","size":[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],"sizemode":"area","line":{"color":"rgba(145,145,145,1)"}},"textfont":{"color":"rgba(145,145,145,1)","size":55},"error_y":{"color":"rgba(145,145,145,1)","width":55},"error_x":{"color":"rgba(145,145,145,1)","width":55},"line":{"color":"rgba(145,145,145,1)","width":55},"frame":null},{"x":[40493.1167010025,50372.6183505012,60252.12,70131.6216494988,80011.1232989976],"y":[12.0875140769299,12.0875140769299,12.0875140769299,12.0875140769299,12.0875140769299],"z":[147.536789556431,196.843126869185,246.149464181939,295.455801494693,344.762138807447],"type":"scatter3d","mode":"lines","line":{"color":"black","width":10,"dash":"dash"},"name":"-1 SD line","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"frame":null},{"x":[40493.1167010025,50372.6183505012,60252.12,70131.6216494988,80011.1232989976],"y":[21.5924859230701,21.5924859230701,21.5924859230701,21.5924859230701,21.5924859230701],"z":[348.849861192553,398.156198505307,447.462535818061,496.768873130815,546.075210443568],"type":"scatter3d","mode":"lines","line":{"color":"black","width":10,"dash":"dash"},"name":"+1 SD line","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="page-72-understanding-b-weights" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="page-72-understanding-b-weights"><span class="header-section-number">4.6</span> Page 72 Understanding b-weights</h2>
<p>See the original regression below. Notice the b-weight (the unstandardized regression weight) for per_child_poverty is 21.1797652. We are going to try to recreate this value in another way to make it clear what it means.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Original regression</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>lm4_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate <span class="sc">~</span> per_child_poverty <span class="sc">+</span> med_hh_income,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> focal_data)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm4_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term                estimate std.error statistic  p.value
  &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)       -311.      218.          -1.43 0.161   
2 per_child_poverty   21.2       5.04         4.20 0.000116
3 med_hh_income        0.00499   0.00242      2.06 0.0450  </code></pre>
</div>
</div>
<p>First, we create a residualized version of violent_crime_rate. That is, a version of violent_crime_rate has teh effect of med_hh_income removed from it. We use the residual() command. This is the same as getting the value from the .resid column after using the augment() command.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>lm_violent_crime_rate <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate <span class="sc">~</span> med_hh_income, <span class="at">data =</span> focal_data)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>violent_crime_rate_residual <span class="ot">&lt;-</span> lm_violent_crime_rate<span class="sc">$</span>residuals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Second, we create a residualized version of per_child_poverty. That is, a version of per_child_poverty has teh effect of med_hh_income removed from it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>lm_per_child_poverty <span class="ot">&lt;-</span> <span class="fu">lm</span>(per_child_poverty <span class="sc">~</span>  med_hh_income, <span class="at">data =</span> focal_data)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>per_child_poverty_residual <span class="ot">&lt;-</span> lm_per_child_poverty<span class="sc">$</span>residuals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To get the b-weight or the original regression (lm4_2) for per_child_poverty we conduct a bivariate regression with these two residuals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>lm_bweight_demo <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate_residual <span class="sc">~</span> per_child_poverty_residual)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm_bweight_demo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term                        estimate std.error statistic   p.value
  &lt;chr&gt;                          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)                -1.75e-15     15.3  -1.14e-16 1        
2 per_child_poverty_residual  2.12e+ 1      4.98  4.25e+ 0 0.0000983</code></pre>
</div>
</div>
<p>Notice that we get 21.1797652 as the b-weight for per_child_poverty_residual here. This is the same as the b-weight for per_child_poverty (no residual suffix) in the original regression lm4_2. The diagram beloow illustrate that b-weight in a multiple regression are weights based on residualized verions of a predictor and the criterion.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="ch_4/partial-b-weight.png" class="img-fluid" style="width:70.0%"></p>
</div>
</div>
</section>
<section id="page-76-b--vs-beta-weights" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="page-76-b--vs-beta-weights"><span class="header-section-number">4.7</span> Page 76 b- vs beta-weights</h2>
<p>The regression weights that we have looked at so far - are usually referred to as b-weights or unstandardized regression coefficients. The are obtained when we analyze the data in it’s original form. That is, each variable has. a different mean and standard deviation. Sometimes, however, we want to be able to compare the magnitude of regression weights. To do so, we need to set the mean of each variable (predictor or criterion) to zero prior to analysis. As well, we need to set the standard deviation of each variable prior to analysis. That is, we need to standrdized (M=0, SD =1) each variable prior to analysis. The weights we obtain when we do this are referred to as beta-weights or standardized regression cofficients. A better name, not used, would be regression weights for standardized data. We can obtain this weights by analyzing the data as described or by transforming b-weights using the formula in the textboook. Standardized regression weights (beta-weights) can be obtained using the apa.reg.table() command in the apaTables package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>lm4_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate <span class="sc">~</span> per_child_poverty <span class="sc">+</span> med_hh_income,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> focal_data)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>table1 <span class="ot">=</span> <span class="fu">apa.reg.table</span>(lm4_3, <span class="at">table.number =</span> <span class="dv">1</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">apa.save</span>(<span class="st">"table1.doc"</span>, table1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="page-77-relative-importance" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="page-77-relative-importance"><span class="header-section-number">4.8</span> Page 77 Relative importance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># It's always a good idea to get the set of focal variables </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in a separate data set.  Once you have missing data,</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># this approach is critical.</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>focal_data <span class="ot">&lt;-</span> statedata2018 <span class="sc">%&gt;%</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(violent_crime_rate, </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>         per_child_poverty, </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>         med_hh_income, </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>         unemploy_rate,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>         percent_uninsured)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>lm4_4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate <span class="sc">~</span> per_child_poverty <span class="sc">+</span> </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>              med_hh_income <span class="sc">+</span> unemploy_rate <span class="sc">+</span> percent_uninsured,</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> focal_data)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm4_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  term                estimate std.error statistic p.value
  &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 (Intercept)       -398.      219.          -1.82  0.0755
2 per_child_poverty   15.4       5.91         2.61  0.0123
3 med_hh_income        0.00469   0.00258      1.82  0.0758
4 unemploy_rate       27.6      23.2          1.19  0.239 
5 percent_uninsured   10.3       4.72         2.18  0.0342</code></pre>
</div>
</div>
<p>Then you can obtain relative importance information:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>x_compare <span class="ot">&lt;-</span> relaimpo<span class="sc">::</span><span class="fu">calc.relimp</span>(lm4_4, </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">type =</span> <span class="fu">c</span>(<span class="st">"lmg"</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"first"</span>, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"last"</span>, </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"betasq"</span>, </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"pratt"</span>))</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x_compare)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Response variable: violent_crime_rate 
Total response variance: 16594.39 
Analysis based on 50 observations 

4 Regressors: 
per_child_poverty med_hh_income unemploy_rate percent_uninsured 
Proportion of variance explained by model: 39.44%
Metrics are not normalized (rela=FALSE). 

Relative importance metrics: 

                         lmg       last      first     betasq       pratt
per_child_poverty 0.15529495 0.09150503 0.24202970 0.32354317  0.27983398
med_hh_income     0.03895609 0.04446327 0.04329193 0.12924768 -0.07480229
unemploy_rate     0.10605740 0.01917314 0.20001828 0.02941550  0.07670488
percent_uninsured 0.09410481 0.06418303 0.15848929 0.08010657  0.11267667

Average coefficients for different model sizes: 

                            1X          2Xs          3Xs          4Xs
per_child_poverty 13.335033251 1.390782e+01 14.375405724 15.417923450
med_hh_income     -0.002712995 7.508337e-04  0.003029558  0.004687669
unemploy_rate     72.055866278 5.874625e+01 46.216351078 27.632656766
percent_uninsured 14.506471774 1.140058e+01 10.243657931 10.313258363</code></pre>
</div>
</div>
<p>Then make the plots:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x_compare)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="chapter4_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="page-79-predicted-means" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="page-79-predicted-means"><span class="header-section-number">4.9</span> Page 79 Predicted Means</h2>
<p>Recall the regression:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>focal_data <span class="ot">&lt;-</span> statedata2018 <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(violent_crime_rate, </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>         per_child_poverty, </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>         med_hh_income)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>lm4_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(violent_crime_rate <span class="sc">~</span> per_child_poverty <span class="sc">+</span> med_hh_income,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> focal_data)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm4_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term                estimate std.error statistic  p.value
  &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)       -311.      218.          -1.43 0.161   
2 per_child_poverty   21.2       5.04         4.20 0.000116
3 med_hh_income        0.00499   0.00242      2.06 0.0450  </code></pre>
</div>
</div>
<p>We need the percentiles for per_child_poverty and med_hh_income.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>focal_data <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(per_child_poverty, med_hh_income) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">per_child_poverty</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">16.84</td>
<td style="text-align: right;">4.75</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">13.0</td>
<td style="text-align: right;">16.5</td>
<td style="text-align: right;">20.00</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">▅▇▇▅▂</td>
</tr>
<tr class="even">
<td style="text-align: left;">med_hh_income</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">60252.12</td>
<td style="text-align: right;">9879.50</td>
<td style="text-align: right;">43567</td>
<td style="text-align: right;">53133.5</td>
<td style="text-align: right;">59162.5</td>
<td style="text-align: right;">67687.25</td>
<td style="text-align: right;">81868</td>
<td style="text-align: left;">▅▇▇▃▃</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>For per_child_poverty: 25th percentile is 13, 75th percentile is 20. We want to look at these with reference to the 50th percentile of med_hh_income which is 59162.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>predict4values <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">per_child_poverty =</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">20</span>),</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">med_hh_income =</span> <span class="fl">59162.</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(predict4values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  per_child_poverty med_hh_income
1                13         59162
2                20         59162</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(lm4_3, predict4values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       1        2 
260.0352 408.2935 </code></pre>
</div>
</div>
<p>For med_hh_income: 25th percentile is 53134, 75th percentile is 67687 We want to look at these with reference to the 50th percentile of per_child_poverty which is 16.5</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>predict4values <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">per_child_poverty =</span> <span class="fl">16.5</span>,</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">med_hh_income =</span> <span class="fu">c</span>(<span class="dv">53134</span>, <span class="dv">67687</span>))</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(predict4values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  per_child_poverty med_hh_income
1              16.5         53134
2              16.5         67687</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(lm4_3, predict4values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       1        2 
304.0800 376.7107 </code></pre>
</div>
</div>
</section>
<section id="page-86-chapter-exercises" class="level2" data-number="4.10">
<h2 data-number="4.10" class="anchored" data-anchor-id="page-86-chapter-exercises"><span class="header-section-number">4.10</span> Page 86 Chapter Exercises</h2>
<section id="activate-packages-1" class="level3" data-number="4.10.1">
<h3 data-number="4.10.1" class="anchored" data-anchor-id="activate-packages-1"><span class="header-section-number">4.10.1</span> Activate packages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis) <span class="co"># use_github_file()</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># read_csv() </span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># clean_names() </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="obtain-data-and-save-it-to-your-computer-1" class="level3" data-number="4.10.2">
<h3 data-number="4.10.2" class="anchored" data-anchor-id="obtain-data-and-save-it-to-your-computer-1"><span class="header-section-number">4.10.2</span> Obtain data and save it to your computer</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">use_github_file</span>(<span class="at">repo_spec =</span> <span class="st">"https://github.com/johnhoffmannVA/LinearRegression/blob/main/TeenBirths.csv"</span>,</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">save_as =</span> <span class="st">"teenbirths.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-data-from-your-computer-1" class="level3" data-number="4.10.3">
<h3 data-number="4.10.3" class="anchored" data-anchor-id="load-data-from-your-computer-1"><span class="header-section-number">4.10.3</span> Load data from your computer</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>teenbirths <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"teenbirths.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="inspect-data-1" class="level3" data-number="4.10.4">
<h3 data-number="4.10.4" class="anchored" data-anchor-id="inspect-data-1"><span class="header-section-number">4.10.4</span> Inspect data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>teenbirths <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,946
Columns: 7
$ state             &lt;chr&gt; "Alabama", "Alabama", "Alabama", "Alabama", "Alabama…
$ county            &lt;chr&gt; "Autauga", "Baldwin", "Barbour", "Bibb", "Blount", "…
$ teen_birth_rate   &lt;dbl&gt; 51, 50, 74, 59, 51, 90, 66, 58, 70, 62, 61, 53, 46, …
$ per_uninsured     &lt;dbl&gt; 14, 16, 19, 18, 18, 21, 18, 16, 19, 18, 19, 18, 17, …
$ per_hsgrads       &lt;dbl&gt; 85, 73, 64, 67, 75, 58, 76, 72, 61, 67, 73, 68, 74, …
$ per_child_poverty &lt;dbl&gt; 18, 20, 36, 29, 24, 40, 40, 32, 44, 33, 32, 30, 34, …
$ per_singleparent  &lt;dbl&gt; 30, 29, 52, 35, 25, 64, 50, 39, 46, 26, 30, 37, 40, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>teenbirths <span class="ot">&lt;-</span> teenbirths <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">as_factor</span>(state)) <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">county =</span> <span class="fu">as_factor</span>(county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>teenbirths <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,946
Columns: 7
$ state             &lt;fct&gt; Alabama, Alabama, Alabama, Alabama, Alabama, Alabama…
$ county            &lt;fct&gt; Autauga, Baldwin, Barbour, Bibb, Blount, Bullock, Bu…
$ teen_birth_rate   &lt;dbl&gt; 51, 50, 74, 59, 51, 90, 66, 58, 70, 62, 61, 53, 46, …
$ per_uninsured     &lt;dbl&gt; 14, 16, 19, 18, 18, 21, 18, 16, 19, 18, 19, 18, 17, …
$ per_hsgrads       &lt;dbl&gt; 85, 73, 64, 67, 75, 58, 76, 72, 61, 67, 73, 68, 74, …
$ per_child_poverty &lt;dbl&gt; 18, 20, 36, 29, 24, 40, 40, 32, 44, 33, 32, 30, 34, …
$ per_singleparent  &lt;dbl&gt; 30, 29, 52, 35, 25, 64, 50, 39, 46, 26, 30, 37, 40, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>teenbirths <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Piped data</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">2946</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">state</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">50</td>
<td style="text-align: left;">Tex: 238, Geo: 158, Vir: 128, Ken: 119</td>
</tr>
<tr class="even">
<td style="text-align: left;">county</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">1744</td>
<td style="text-align: left;">Was: 31, Jef: 26, Fra: 24, Jac: 23</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 22%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">teen_birth_rate</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">47.44</td>
<td style="text-align: right;">20.56</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">▃▇▅▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">per_uninsured</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">18.30</td>
<td style="text-align: right;">5.75</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">43</td>
<td style="text-align: left;">▂▇▆▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">per_hsgrads</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">82.08</td>
<td style="text-align: right;">9.67</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">77</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">▁▁▁▆▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">per_child_poverty</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">24.44</td>
<td style="text-align: right;">9.10</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">▂▇▅▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">per_singleparent</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">31.14</td>
<td style="text-align: right;">9.85</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">76</td>
<td style="text-align: left;">▁▇▅▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapter3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Simple Linear Regression Models</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./chapter5.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Goodness of Fit</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>